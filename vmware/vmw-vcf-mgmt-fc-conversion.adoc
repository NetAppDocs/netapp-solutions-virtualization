---
sidebar: sidebar
permalink: vmware/vmw-vcf-mgmt-fc-conversion.html
keywords: netapp, vmware, cloud, foundation, vcf, asa, aff, all-flash, fc, array, ontap tools, otv, sddc, sddc manager, ontap tools, ontap tools 10
summary: "Convert an existing vSphere 8 cluster to a VCF 5.2 management domain using the VCF Import Tool. You'll validate the vCenter appliance, deploy the SDDC manager, create NSX deployment specifications, and perform the conversion."
---
= Convert vSphere cluster to VCF management domain using the VCF Import Tool
:icons: font
:imagesdir: ../media/

[.lead]
Convert an existing vSphere 8 cluster to a VCF 5.2 management domain using the VCF Import Tool. You'll validate the vCenter appliance, deploy the SDDC manager, create NSX deployment specifications, and perform the conversion.

The VCF Import Tool from VMware by Broadcom is a utility that is used on both the vCenter appliance and SDDC manager to validate configurations and provide conversion and import services for vSphere and VCF environments. For more information, refer to link:https://techdocs.broadcom.com/us/en/vmware-cis/vcf/vcf-5-2-and-earlier/5-2/map-for-administering-vcf-5-2/importing-existing-vsphere-environments-admin/vcf-import-tool-options-and-parameters-admin.html[VCF Import Tool Options and Parameters].

Where appropriate, VMware documentation will be referred to for step-by-step instructions.

== Step 1: Copy the VCF Import Tool and run a precheck
The VCF Import Tool is used on the vCenter appliance to validate that the vSphere cluster is in a healthy state for the VCF conversion or import process.

.Steps
. Copy the VCF Import Tool to the target vCenter appliance by following the instructions in the VMware documentation: https://techdocs.broadcom.com/us/en/vmware-cis/vcf/vcf-5-2-and-earlier/5-2/copy-the-vcf-import-tool-to-the-target-vcenter-appliance.html[Copy the VCF Import Tool to the Target vCenter Appliance].
. Extract the bundle using the following command:
+
....
tar -xvf vcf-brownfield-import-<buildnumber>.tar.gz
....
. Run the validation precheck by following the instructions in the VMware documentation: https://techdocs.broadcom.com/us/en/vmware-cis/vcf/vcf-5-2-and-earlier/5-2/run-a-precheck-on-the-target-vcenter-before-conversion.html[Run a Precheck on the Target vCenter Before Conversion].
. The following output shows that the vCenter appliance has passed the precheck.
+
image::vmware-vcf-import-nfs-011.png[vcf import tool precheck]

== Step 2: Deploy the SDDC Manager and create NSX deployment specification

Deploy the SDDC Manager appliance on the same vSphere cluster that you plan to convert to a VCF management domain.

.Steps
. Deploy the SDDC Manager appliance by following the instructions in the VMware documentation: https://techdocs.broadcom.com/us/en/vmware-cis/vcf/vcf-5-2-and-earlier/5-2/deploy-the-sddc-manager-appliance-on-the-target-vcenter.html[Deploy the SDDC Manager Appliance on the Target vCenter].
. Add hosts to the SDDC Manager inventory by following the instructions in the VMware documentation: https://techdocs.broadcom.com/us/en/vmware-cis/vcf/vcf-5-2-and-earlier/5-1/commission-hosts.html[Commission Hosts].
+
The following is an example of a JSON file for NSX deployment:
+
....
{
  "license_key": "xxxxx-xxxxx-xxxxx-xxxxx-xxxxx",
  "form_factor": "medium",
  "admin_password": "************************",
  "install_bundle_path": "/tmp/vcfimport/bundle-133764.zip",
  "cluster_ip": "172.21.166.72",
  "cluster_fqdn": "vcf-m02-nsx01.sddc.netapp.com",
  "manager_specs": [{
    "fqdn": "vcf-m02-nsx01a.sddc.netapp.com",
    "name": "vcf-m02-nsx01a",
    "ip_address": "172.21.166.73",
    "gateway": "172.21.166.1",
    "subnet_mask": "255.255.255.0"
  },
  {
    "fqdn": "vcf-m02-nsx01b.sddc.netapp.com",
    "name": "vcf-m02-nsx01b",
    "ip_address": "172.21.166.74",
    "gateway": "172.21.166.1",
    "subnet_mask": "255.255.255.0"
  },
  {
    "fqdn": "vcf-m02-nsx01c.sddc.netapp.com",
    "name": "vcf-m02-nsx01c",
    "ip_address": "172.21.166.75",
    "gateway": "172.21.166.1",
    "subnet_mask": "255.255.255.0"
  }]
}
....
. Copy the JSON file to a directory on the SDDC Manager.

NOTE: When deploying an NSX Manager cluster in a convert or import operation, NSX-VLAN networking is utilized. For information about NSX-VLAN networking limitations, refer to https://techdocs.broadcom.com/us/en/vmware-cis/vcf/vcf-5-2-and-earlier/5-2/considerations-before-converting-or-importing-existing-vsphere-environments-into-vcf-admin.html[Considerations Before Converting or Importing Existing vSphere Environments into VMware Cloud Foundation].

== Step 3: Upload software to SDDC Manager
Upload the VCF Import Tool bundle and the NSX deployment bundle to the SDDC Manager by following the instructions in the VMware documentation: https://techdocs.broadcom.com/us/en/vmware-cis/vcf/vcf-5-2-and-earlier/5-2/seed-software-on-sddc-manager.html[Upload the Required Software to the SDDC Manager Appliance].

Make sure you copy the VCF Import Tool and the NSX deployment bundle to the following directory on the SDDC Manager: `/home/vcf/vcfimport` .

== Step 4: Convert the vSphere cluster to the VCF management domain

Convert the vSphere cluster  to the VCF management domain by following the instructions in the VMware documentation: https://techdocs.broadcom.com/us/en/vmware-cis/vcf/vcf-5-2-and-earlier/5-2/import-workload-domain-into-sddc-manager-inventory.html[Convert or Import the vSphere Environment into the SDDC Manager Inventory].

You can use the following command to convert the vSphere cluster to a VCF management domain and deploy the NSX cluster:

....
python3 vcf_brownfield.py convert --vcenter '<vcenter-fqdn>' --sso-user '<sso-user>' --domain-name '<wld-domain-name>' --nsx-deployment-spec-path '<nsx-deployment-json-spec-path>'
....

You can review a printout of VCF import tool functions by running the following command from the `/home/vcf/vcf-import-package/vcf-brownfield-import-<version>/vcf-brownfield-toolset` directory.

....
python3 vcf_brownfield.py --help
....

== Step 5: Add licensing to VCF

After completing the conversion, licensing must be added to the environment.

.Steps
. Log in to the SDDC Manager UI.
. Navigate to *Administration > Licensing* in the navigation pane.
. Click *+ License Key*.
. Choose a product from the drop-down menu.
. Enter the license key.
. Provide a description for the license.
. Click *Add*.
. Repeat these steps for each license.
