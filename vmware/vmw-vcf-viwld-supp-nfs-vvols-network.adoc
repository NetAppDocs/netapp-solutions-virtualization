---
sidebar: sidebar
permalink: vmware/vmw-vcf-viwld-supp-nfs-vvols-network.html
keywords: netapp, vmware, cloud, foundation, vcf, aff, all-flash, nfs, vvol, vvols, array, ontap tools, otv, sddc
summary: "Configure NFS networking on ESXi hosts in VMware Cloud Foundation management domains to enable connectivity to ONTAP storage systems. You'll create distributed port groups with VLAN separation, configure uplink teaming for redundancy, and set up VMkernel adapters on each ESXi host to establish dedicated NFS paths for failover capabilities."
---

= Configure networking for NFS on ESXi hosts in a VCF VI workload domain
:hardbreaks:
:nofooter:
:icons: font
:linkattrs:
:imagesdir: ../media/

[.lead]
Configure NFS networking on ESXi hosts in VMware Cloud Foundation management domains to enable connectivity to ONTAP storage systems. You'll create distributed port groups with VLAN separation, configure uplink teaming for redundancy, and set up VMkernel adapters on each ESXi host to establish dedicated NFS paths for failover capabilities.

Perform the following steps on the VI Workload Domain cluster using the vSphere client. In this case vCenter Single Sign-On is being used so the vSphere client is common across the management and workload domains.

== Step 1: Create a distributed port group for NFS traffic
Complete the following steps to create a new distributed port group for the network to carry NFS traffic.

.Steps
. From the vSphere client , navigate to *Inventory > Networking* for the workload domain. Navigate to the existing Distributed Switch and choose the action to create *New Distributed Port Group...*.
+
image:vmware-vcf-asa-022.png[Choose to create new port group]
+
{nbsp}
. In the *New Distributed Port Group* wizard, fill in a name for the new port group and click *Next* to continue.

. On the *Configure settings* page, fill out all settings. If VLANs are being used be sure to provide the correct VLAN ID. Click *Next* to continue.
+
image:vmware-vcf-asa-023.png[Fill out VLAN ID]
+
{nbsp}
. On the *Ready to complete* page, review the changes and click *Finish* to create the new distributed port group.

. Once the port group has been created, navigate to the port group and select the action to *Edit settings...*.
+
image:vmware-vcf-aff-037.png[DPG - edit settings]
+
{nbsp}
. On the *Distributed Port Group - Edit Settings* page, navigate to *Teaming and failover* in the left-hand menu. Enable teaming for the uplinks to be used for NFS traffic by ensuring they are together in the *Active uplinks* area. Move any unused uplinks down to *Unused uplinks*.
+
image:vmware-vcf-aff-038.png[DPG - team uplinks]
+
{nbsp}
. Repeat this process for each ESXi host in the cluster.

== Step 2: Create a VMkernel adapter on each ESXi host
Create a VMkernel adapter on each ESXi host in the workload domain.

.Steps

. From the vSphere client navigate to one of the ESXi hosts in the workload domain inventory. From the *Configure* tab select *VMkernel adapters* and click *Add Networking...* to start.
+
image:vmware-vcf-asa-030.png[Start add networking wizard]
+
{nbsp}
. On the *Select connection type* window, choose *VMkernel Network Adapter* and click *Next* to continue.
+
image:vmware-vcf-asa-008.png[Choose VMkernel Network Adapter]
+
{nbsp}
. On the *Select target device* page, choose one of the distributed port groups for NFS that was created previously.
+
image:vmware-vcf-aff-039.png[Choose target port group]
+
{nbsp}
. On the *Port properties* page, keep the defaults (no enabled services) and click *Next* to continue.

. On the *IPv4 settings* page, fill in the *IP address*, *Subnet mask*, and provide a new gateway IP address (only if required). Click *Next* to continue.
+ 
image:vmware-vcf-aff-040.png[VMkernel IPv4 settings]
+
{nbsp}
. Review your selections on the *Ready to complete* page and click *Finish* to create the VMkernel adapter.
+
image:vmware-vcf-aff-041.png[Review VMkernel selections]

== What's next?
After you configure networking for NFS on all ESXi hosts in the workload domain, link:vmw-vcf-viwld-supp-nfs-vvols-storage.html[configure storage for NFS vVols].