---
sidebar: sidebar
permalink: migration/shift-toolkit-san.html
keywords: netapp, vmware, esxi, vm, migration, openshift, virtualization, hyper-v, proxmox
summary: "Migrate VMs from SAN-based datastores to NAS before converting them with the Shift Toolkit, using VMware Storage vMotion and Hyper-V Storage Live Migration to maintain business continuity."
---
= Migrate VMs from SAN environments for conversion with Shift Toolkit
:hardbreaks:
:nofooter:
:icons: font
:linkattrs:
:imagesdir: ../media/

[.lead]
Migrate VMs from SAN-based datastores to NAS before converting them with the Shift Toolkit, using VMware Storage vMotion and Hyper-V Storage Live Migration to maintain business continuity.

== Requirements for SAN-based VMs

The Shift Toolkit requires VMs to reside in a NAS environment (NFS for VMware ESXi) before conversion. If your VMs are currently stored on SAN-based datastores using iSCSI, Fibre Channel (FC), Fibre Channel over Ethernet (FCoE), or NVMe over Fibre Channel (NVMe/FC), you must first migrate them to an NFS datastore.

== Migration workflow for SAN environments

The following diagram illustrates the complete migration workflow for VMs stored in a SAN environment.

image::shift-toolkit-260.png["Migration workflow diagram showing VM movement from SAN to NAS and back to SAN"]

The migration process consists of three main phases:

.Migrate from SAN to NAS (VMware environment)

Use VMware vSphere Storage vMotion to migrate VMs and their disks from the SAN datastore to an NFS datastore. This operation can be performed without VM downtime.

.Convert VMs with the Shift Toolkit

After the VMs reside on the NFS datastore, the Shift Toolkit uses NetApp FlexClone technology to convert the VMs from VMware ESXi to any hypervisor. The converted VMs and their disks are placed on a qtree accessible by the respective hypervisor host.

.Migrate back to SAN

After conversion, use storage migration to move the converted VMs and their disks from the qtree to a SAN-enabled volume. This allows you to maintain your SAN infrastructure in the respective hypervisor environment.

== Handling processor compatibility issues

When performing live VM migration between nodes with different processor capabilities, the migration may fail due to processor compatibility checks.

To resolve this issue:

. Enable the "Migrate to a physical computer with a different processor" option in Hyper-V.
. Use the processor compatibility script available in the Shift Toolkit script block to configure VMs for cross-processor migration.

This setting allows VMs to migrate between hosts with different processor feature sets while maintaining compatibility.