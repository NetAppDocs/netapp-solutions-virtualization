---
sidebar: sidebar
permalink: migration/shift-toolkit-install-prereqs.html
keywords: netapp, vmware, esxi, vm, migration, openshift, virtualization, hyper-v, proxmox
summary: 
---
= Pre-requisites to install the NetApp Shift Toolkit
:icons: font
:linkattrs:
:imagesdir: ../media/

[.lead]
Install the Shift Toolkit on a dedicated VM running a Windows operating system, using either online or offline installation options. This process involves reviewing the installation requirements, configuring ONTAP Storage Virtual Machines (SVMs), qtrees, and CIFS shares, downloading the installation package, and running the installer.

== Hardware requirements

Ensure that Shift server host meets minimum hardware requirements. 

* CPU – 4 vCPUs
* Memory – 8 GB minimum
* Disk Space – minimum 100 GB

NOTE: Must have 900 MB disk space available for installation.

== Connectivity requirements

* Ensure the hypervisor and storage environment is configured so that Shift toolkit can interact properly with all components in the environment.
* Shift toolkit must be installed on a standalone Windows server (physical or virtual).
* For Hyper-V based migrations, the Shift server, Data ONTAP CIFS server and Hyper-V servers must be on the same Windows Active Directory domain.
* Multiple LIFs for CIFS and NFS are supported for use with Storage Virtual Machine when doing VM conversions. The Hyper-V server and ESXi hosts access the Storage Virtual Machine (SVM) using the IP addresses of these LIFs.
* For CIFS operations, the time settings for the Windows domain controller and the NetApp storage controller must be synchronized.

== ONTAP Storage Configurations 

=== Create a New SVM (recommended)

Although Shift toolkit permits the use of an existing SVM, it is a NetApp best practice to create a new SVM. Move the VMs to be migrated or converted to a new designated NFS v3 datastore residing on a dedicated Data ONTAP Storage Virtual Machine (SVM) using Storage vMotion. This svmotion based migration is performed without any downtime for the VM. With this approach, the VMs that are designated to be migrated do not reside on the production SVM. Use the ONTAP CLI, NetApp PowerShell toolkit or System Manager to create the new SVM.

Follow the steps provided in this link to provision a new SVM allowing both NFS and SMB protocol.

NOTE: It is a good practice creating a new SVM to be sure that the SVM meets the Shift toolkit requirements without having to modify the production SVM in ways that might be disruptive.

NOTE: For bi-directional migration between VMware to Hyper-V, the new SVM should have both NFS and SMB protocol enabled. The volume provisioned should also have both NFS and SMB enabled.

=== Qtree requirements

A qtree should be created on the volume that will be used for hosting the VMs to be converted from VMware to Hyper-V so as to segregate and store the VHDX files or for the qcow2 or VHDX files that will be converted from VMDKs.

* For ESX to Hyper-V conversion, Shift toolkit places the converted VHDX’s on a qtree (with NTFS security style) within the same volume. 
* For Hyper-V to ESX conversion, Shift toolkit places the converted VMDK’s on a qtree (with UNIX security style) within the same volume.
* For ESX VMDK to QCOW2 conversions, a qtree with UNIX security style should be used. 
* For ESX VMDK to RAW conversions, a qtree with UNIX security style should be used. 

The Shift toolkit does not verify the security style of the qtrees. Therefore, it is important to create qtrees with the appropriate security style based on the target hypervisor and disk type.

NOTE: The destination path must be on the same volume as the source VM.

NOTE: Assign the correct security style to the qtree according to the target hypervisor type and disk format.

NOTE: If the converted qcow2 files are intended for use with OpenShift virtualization, there's an exception: these files can be placed directly on the volume without utilizing a qtree. To achieve this, use Shift toolkit GUI or employ Shift toolkit APIs to convert VMDK files to qcow2 format and place them directly within the volume.

image::shift-toolkit-011.png["Diagram of type of q-tree to create based on migration type"]

Follow the steps provided in this link:https://docs.netapp.com/us-en/ontap/nfs-config/create-qtree-task.html[link] to create a qtree with the right security style.

image::shift-toolkit-012.png["Dialog showing the type of q-tree to create"]

=== CIFS Share requirements

For Hyper-V migrations, create a share where the converted VM data will be stored. Make sure that the NFS share (used to store the VMs to be converted) and the destination share (used to store the converted VMs) reside on the same volume.

Follow the steps provided in this link:https://docs.netapp.com/us-en/ontap/smb-config/create-share-task.html[link] to create the share with the appropriate properties. Ensure to select continuous availability property along with the other default ones.

image::shift-toolkit-013.png["Dialog showing the CIFS share to create"]

image::shift-toolkit-014.png["Dialog showing the CIFS share creation results"]

NOTE: SMB 3.0 must be enabled, this is enabled by default.

NOTE: Ensure continuously available property is enabled.

NOTE: Export policies for SMB must be disabled on the storage virtual machine (SVM)

NOTE: The domain to which the CIFS server and Hyper-V servers belong must permit both Kerberos and NTLMv2 authentication.

NOTE: ONTAP creates the share with the Windows default share permission of Everyone / Full Control